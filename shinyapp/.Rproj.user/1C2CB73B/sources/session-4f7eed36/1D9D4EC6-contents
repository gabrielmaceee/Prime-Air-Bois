#
# This is the user-interface definition of a Shiny web application. You can
# run the application by clicking 'Run App' above.
#
# Find out more about building applications with Shiny here:
#
#    http://shiny.rstudio.com/
#

library(shiny)
library(shinydashboard)


# Define UI for application that draws a histogram
shinyUI(

  dashboardPage(
    dashboardHeader(title = "Analyse des dossiers de suivi de la prime air bois", titleWidth = 800),
    dashboardSidebar(
      sidebarMenu(  
        menuItem("Présentation",  tabName = "presentation", icon = icon("font-awesome"), startExpanded = FALSE),
        menuItem("Choix du territoire",  tabName = "territoire", icon = icon("font-awesome"), startExpanded = FALSE,
                 menuSubItem(tabPanel("Custom",
                                      selectizeInput('un_territoire',
                                                     label='Sélectionner un territoire',
                                                     choices = c("Tous",unique(data$territoire))
                                      )
                 ), tabName = "exploration")  
                 ),
        menuItem("Exploration", tabName = "exploration", icon = icon("a"), startExpanded = FALSE,
        menuSubItem(tabPanel("Variables",
                             selectizeInput('column_name',
                                            label='Sélectionner une variable',
                                            choices = column_names[order(column_names$order, decreasing = FALSE),]$name
                             )
        ), tabName = "exploration")

        ),
        menuItem("Indicateurs", tabName = "indicateurs", icon = icon("b"), startExpanded = FALSE, 
                 menuItem("La prime et ses bénéficiaires", startExpanded = FALSE,
                           menuSubItem("Carto",tabName = "carto"),
                           menuSubItem("Évolution demande par territoire",tabName = "evolution1"),
                           menuSubItem("Évolution prime majorée",tabName = "evolution2"),
                           menuSubItem("Évolution tranche revenus",tabName = "evolution3"),
                           menuSubItem("Montant aide territoires",tabName = "comp_terr")),
                 
                 menuItem("Modes d'usages", startExpanded = FALSE,
                          menuSubItem("Évo type de matériel",tabName = "type_mat"),
                          menuSubItem("Évo usage matériel",tabName = "usage"),
                          menuSubItem("Évo consommation",tabName = "conso"),
                          menuSubItem("Évo type combustible",tabName = "combustible"))
                 ),
        menuItem("Typologie", tabName = "typologie", icon = icon("c"), startExpanded = FALSE, 
                 menuItem("Communale", startExpanded = FALSE,
                          menuSubItem("Test",tabName = "typologie")),
                 menuItem("Individuelle", startExpanded = FALSE,
                          menuSubItem("Test",tabName = "typologie"),
                          menuSubItem("Test",tabName = "typologie"),
                          menuSubItem("Test",tabName = "typologie"),
                          menuSubItem("Test",tabName = "typologie")
                          )
        )
      )
    ),
    dashboardBody(
      tabItems(
        tabItem(tabName = "presentation",
                h2("Présentation du fonctionnement de l'appli et des données")
        ),
        tabItem(tabName = "exploration",
                plotOutput("distPlot", height = "750px", width =  "100%")
        ),
        
        tabItem(tabName = "carto",
                leafletOutput("cartographie", height = "750px", width =  "100%")
        ),
        tabItem(tabName = "evolution1", plotOutput("evo_demande", height = "750px", width =  "100%")),
        tabItem(tabName = "typologie",
                 h2("oui, c'est les typologies")
        )
    )
  )
)
)