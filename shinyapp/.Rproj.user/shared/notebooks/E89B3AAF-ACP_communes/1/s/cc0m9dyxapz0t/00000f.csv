"0","count <- data %>%"
"0","  group_by(insee_com) %>%"
"0","  count()"
"0","fo <- data[data$Type.Ancien.appareil != ""Foyer ouvert"",] %>%"
"0","  group_by(insee_com) %>%"
"0","  count()"
"0","buche <- data[data$Type.combustible.nouveau.materiel == ""Bûche"",] %>%"
"0","  group_by(insee_com) %>%"
"0","  count()"
"0","maj <- data[data$majoration == ""M"",] %>% group_by(insee_com) %>% count()"
"0","names(comm) <- c(""communes.depcom"",""commune"", ""superficie_foret"", ""taux_forets"", ""évolution_nb_logements"")"
"0","data_test = left_join(count, comm, by = join_by(""insee_com"" == ""communes.depcom""))"
"0","names(comm2) <- c(""communes.depcom"", ""Densité_pop"", ""Part_résidences_principales_loc"", ""part_maisons"")"
"0","data_test <- data_test %>% left_join(comm2, by = join_by(""insee_com"" == ""communes.depcom""))"
"0","names(logement) = c(""insee_com"",""nb_maisons_rp_2020"", ""part_résidences_principales"")"
"0","data_test <- data_test %>% left_join(logement, by = ""insee_com"")"
"0","data_test <- data_test %>% left_join(types_communes, by = ""insee_com"")"
"0","data_test <- data_test %>% left_join(objectifs_communes, by = ""insee_com"")"
"0","data_test <- data_test %>% left_join(revenus_communes, by = ""insee_com"")"
"0","data_test <- na.omit(data_test)"
"0","data_test[, ""taux_dossiers_habitant""] = data_test$n / as.numeric(data_test$nb_personnes_menages_fiscaux)"
"0","data_test[, ""taux_changement""] = data_test$changement_2023 / data_test$objectifs_2022"
"0","data_test[, ""objectifs_2022_par_maison""] = data_test$objectifs_2022 / as.numeric(data_test$nb_maisons_rp_2020)"
"0","data_test[, ""taux_feuillus""] = surf_bois$feuillus / surf_bois$`Surface commune`"
"0","data_test[, ""taux_feuillus_mixte""] = (surf_bois$feuillus + surf_bois$mixtes) / surf_bois$`Surface commune`"
